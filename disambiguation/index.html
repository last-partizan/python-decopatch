
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.8">
    
    
      
        <title>Disambiguation principes - decopatch</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#disambiguation-principles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="decopatch" class="md-header__button md-logo" aria-label="decopatch" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            decopatch
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Disambiguation principes
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/smarie/python-decopatch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="decopatch" class="md-nav__button md-logo" aria-label="decopatch" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    decopatch
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/smarie/python-decopatch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../motivation/" class="md-nav__link">
        Motivation
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Disambiguation principes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Disambiguation principes
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-no-args-decorators" class="md-nav__link">
    1- no-args decorators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-keyword-only-decorators" class="md-nav__link">
    2- keyword-only decorators
  </a>
  
    <nav class="md-nav" aria-label="2- keyword-only decorators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-mandatory-arguments" class="md-nav__link">
    1+ mandatory argument(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#0-mandatory-arguments" class="md-nav__link">
    0 mandatory arguments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-general-case" class="md-nav__link">
    3- General case
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pep_proposal/" class="md-nav__link">
        PEP proposal
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-no-args-decorators" class="md-nav__link">
    1- no-args decorators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-keyword-only-decorators" class="md-nav__link">
    2- keyword-only decorators
  </a>
  
    <nav class="md-nav" aria-label="2- keyword-only decorators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-mandatory-arguments" class="md-nav__link">
    1+ mandatory argument(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#0-mandatory-arguments" class="md-nav__link">
    0 mandatory arguments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-general-case" class="md-nav__link">
    3- General case
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/smarie/python-decopatch/edit/main/docs/disambiguation.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="disambiguation-principles">Disambiguation principles<a class="headerlink" href="#disambiguation-principles" title="Permanent link">&para;</a></h1>
<p>As stated in the <a href="../index">introduction</a>, without language modification (see <a href="../pep_proposal">proposal</a>) or additional knowledge or source code introspection, python is just <strong>not capable</strong> of detecting that <code>@say_hello(foo)</code> is different from <code>@say_hello</code> applied to function <code>foo</code> without parenthesis.</p>
<p>However there are well-known "tricks" to perform a disambiguation that covers most standard cases. <code>decopatch</code> is basically a collection of such tricks. Some of them are static, based on your decorator's signature, and some others are dynamic, based on the received arguments. This section explains what happens behind the scenes.</p>
<p>The reader is encouraged to get familiar with the basic <code>decopatch</code> principles first by reading the  <a href="../index">introduction</a>. In particular the two main development styles (nested and flat) are assumed to be understood. All examples below use the "flat" style, but the equivalent "nested" style would lead to the exact same result.</p>
<h2 id="1-no-args-decorators">1- no-args decorators<a class="headerlink" href="#1-no-args-decorators" title="Permanent link">&para;</a></h2>
<p>It is probably quite useless to use <code>decopatch</code> if your decorator has no arguments, except if you wish to easily support with- and without- parenthesis usage. This is how you can do it </p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">decopatch</span> <span class="kn">import</span> <span class="n">decorator</span><span class="p">,</span> <span class="n">DECORATED</span>

<span class="nd">@decorator</span>
<span class="k">def</span> <span class="nf">replace_with_hello</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="n">DECORATED</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decorator to replace anything with the &#39;hello&#39; string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;hello&#39;</span>
</code></pre></div>
<p>You can of course test that it works fine:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@replace_with_hello</span>  <span class="c1"># no parenthesis</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">pass</span>
<span class="k">assert</span> <span class="n">foo</span> <span class="o">==</span> <span class="s1">&#39;hello&#39;</span>

<span class="nd">@replace_with_hello</span><span class="p">()</span>  <span class="c1"># with parenthesis</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">pass</span>
<span class="k">assert</span> <span class="n">foo</span> <span class="o">==</span> <span class="s1">&#39;hello&#39;</span>
</code></pre></div>
<p>In this particular case, <code>decopatch</code> does not expose a decorator with no arguments as you would expect, but it instead adds a "dummy" var-positional argument named <code>_</code>, so that both with- and without- parenthesis usages are supported: </p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; help(replace_with_hello)
Help on function replace_with_hello in module ...:

replace_with_hello(*_)
    Decorator to replace anything by the &#39;hello&#39; string.
</code></pre></div>
<p>If your users try to input arguments they will get a <code>TypeError</code>, except if they provide a single argument that is a callable or a class. In that case we have no means to disambiguate so we prefer to consider that this is a no-parenthesis usage, rather than trying complex disambiguation tricks. After all, your decorator is supposed to have no arguments :)</p>
<div class="highlight"><pre><span></span><code><span class="n">replace_with_hello</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>      <span class="c1"># TypeError: function &#39;replace_with_hello&#39; does not accept any argument.</span>
<span class="n">replace_with_hello</span><span class="p">(</span><span class="nb">print</span><span class="p">)</span>  <span class="c1"># no error !</span>
</code></pre></div>
<p>See <code>create_no_args_decorator</code> in the <a href="https://github.com/smarie/python-decopatch/blob/master/decopatch/main.py">source code</a> for details.</p>
<h2 id="2-keyword-only-decorators">2- keyword-only decorators<a class="headerlink" href="#2-keyword-only-decorators" title="Permanent link">&para;</a></h2>
<h3 id="1-mandatory-arguments">1+ mandatory argument(s)<a class="headerlink" href="#1-mandatory-arguments" title="Permanent link">&para;</a></h3>
<p>If your decorator is keyword-only and has <strong>at least one mandatory argument</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@decorator</span>
<span class="k">def</span> <span class="nf">replace_with</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">replacement</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">DECORATED</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Decorator to replace anything with the &lt;replacement&gt; object. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">replacement</span>
</code></pre></div>
<p>then everything is very easy for <code>decopatch</code>: it can expose your desired signature directly, users have no way to use it in an ambiguous manner, and a successful call will always be a with-parenthesis call. </p>
<div class="highlight"><pre><span></span><code><span class="nd">@replace_with</span><span class="p">(</span><span class="n">replacement</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">pass</span>
<span class="k">assert</span> <span class="n">foo</span> <span class="o">==</span> <span class="s1">&#39;hello&#39;</span>

<span class="n">replace_with</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>    <span class="c1"># TypeError: replace_with() takes 0 positional arguments</span>
<span class="n">replace_with</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>  <span class="c1"># TypeError: replace_with() takes 0 positional arguments</span>
</code></pre></div>
<p>See <code>create_kwonly_decorator</code> in the <a href="https://github.com/smarie/python-decopatch/blob/master/decopatch/main.py">source code</a> for details.</p>
<h3 id="0-mandatory-arguments">0 mandatory arguments<a class="headerlink" href="#0-mandatory-arguments" title="Permanent link">&para;</a></h3>
<p>If your decorator is keyword-only but has <strong>no mandatory argument</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@decorator</span>
<span class="k">def</span> <span class="nf">replace_with</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">replacement</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">DECORATED</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decorator to replace anything with the &lt;replacement&gt; object.</span>
<span class="sd">    Default value is &#39;hello&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">replacement</span>
</code></pre></div>
<p><code>decopatch</code> automatically adds a dummy var-positional argument named <code>_</code> to the decorator signature so that your users can use it without arguments nor parenthesis:</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt;help(replace_with)
Help on function replace_with in module ...:
replace_with(*_, replacement=&#39;hello&#39;)
    Decorator to replace anything with the &lt;replacement&gt; object.
</code></pre></div>
<p>Then disambiguations are handled similarly to all other decorators (see below).</p>
<p>See <code>create_kwonly_decorator</code> in the <a href="https://github.com/smarie/python-decopatch/blob/master/decopatch/main.py">source code</a> for details.</p>
<h2 id="3-general-case">3- General case<a class="headerlink" href="#3-general-case" title="Permanent link">&para;</a></h2>
<p>In the general case, disambiguation is made of two phases: first eliminating cases for which we have no doubts, then handling the remaining ambiguous cases.</p>
<p>See <code>disambiguate_call</code> in the <a href="https://github.com/smarie/python-decopatch/blob/master/decopatch/utils_disambiguation.py">source code</a> for details.</p>
<p><strong>a- Eliminating easy cases:</strong></p>
<ul>
<li>we look at the number of positional and keyword arguments to eliminate cases that can not be a "no-parenthesis" usage</li>
<li>we look at the value of the argument received to eliminate further: for example, if it is not a callable nor a class it is has to be provided with parenthesis.</li>
</ul>
<p><strong>b- Handling still-ambiguous cases</strong></p>
<p>If we reach this part, that's because the first argument in the signature is </p>
<ul>
<li>a callable or a class,</li>
<li>positional (or in python 2, is different from its default value), </li>
<li>and it is the only one (or in python 2, the only one different from its default value)</li>
</ul>
<p>Note: python 2 behaviour should align when this <a href="https://github.com/testing-cabal/funcsigs/issues/33"><code>funcsigs</code> issue</a> is fixed.</p>
<p>In that scenario, <code>decopatch</code> makes the least worst guess: <strong>this is probably a no-parenthesis call</strong>. Because it is not very probable that your decorator is made to receive a function or a class as first argument.</p>
<p>However you can change this default behaviour, by providing additional knowledge.</p>
<p>First, you can <strong>explicitly declare that your decorator is a function-only or class-only decorator</strong>, by using <code>@decorator(is_function_decorator=False)</code> or <code>(is_class_decorator=False)</code>, or by using the shortcut aliases <code>@class_decorator</code> or <code>@function_decorator</code> respectively. In that case, <code>decopatch</code> will know that for example a class received by a function decorator is probably a with-parenthesis first argument.</p>
<p>You can also <strong>provide an explicit disambiguation function</strong> (<code>custom_disambiguator=...</code>). This function will only be called for ambiguous cases. It should accept a single argument (the first argument's value), and should return either <code>FirstArgDisambiguation.is_normal_arg</code> or <code>FirstArgDisambiguation.is_decorated_target</code>. It can also return <code>FirstArgDisambiguation.is_ambiguous</code> if it can not decide ; in which case an exception will be raised. For your convenience, you can use the predefined disambiguators <code>custom_disambiguator=with_parenthesis</code> or <code>custom_disambiguator=no_parenthesis</code> if an ambiguous first argument should always be handled as an arg (with parenthesis) or as the decorated target (no parenthesis) respectively.</p>
<p>Finally as a last resort scenario you can <strong>enable introspection</strong> (<code>enable_stack_introspection=True</code>). This beta feature seems to only work reliably with function decorators, because <code>inspect.stack</code> does not provide a reliable way to access the decorator usage source code line when used on a class. Note that it seems to fail when used with <code>python &gt;=3.8</code>.</p>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../motivation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Motivation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Motivation
            </div>
          </div>
        </a>
      
      
        
        <a href="../pep_proposal/" class="md-footer__link md-footer__link--next" aria-label="Next: PEP proposal" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              PEP proposal
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.0238f547.min.js"></script>
      
    
  </body>
</html>